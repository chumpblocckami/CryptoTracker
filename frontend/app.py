import datetime as dtfrom flask import Flask, render_templatefrom elasticsearch import Elasticsearchfrom elasticsearch import helpersapp = Flask(__name__)es = Elasticsearch(hosts=["elasticsearch"],                                http_auth=("", ""),                                timeout=40,                                max_retries=10,                                retry_on_timeout=True,)@app.route('/')def home():    return render_template('home.html')@app.route('/<crypto>', methods=['GET','POST'])def get_player_by_name(crypto):    try:        res = helpers.scan(            es,            index=crypto,            scroll="5m",            request_timeout=60,            query={                "query": {                    "bool": {                        "filter": [],                        "must": [],                        "must_not": [],                        "should": [],                    }                }            },        )        output = [(f"{dt.datetime.fromtimestamp(x['_source']['timestamp']/1000)}", x['_source']['price']) for x in res]        body = f"""<table border=1> {" ".join([f'<tr><td>{x[0]}</td><td>{round(x[1],5)}</td></tr>' for x in output])} </table>"""        return body    except Exception as e:        print(e)        return [{"body":"error"}]if __name__ == "__main__":    app.run(host='0.0.0.0', port=5000)